"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[609],{1178:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var o=t(5893),r=t(1151);const i={},a="A Fun Example: Dog-on-Couch Detector",c={id:"getting-started/dog-on-couch",title:"A Fun Example: Dog-on-Couch Detector",description:"Here is a whimsical example of how you could use Groundlight in your home to keep your dog off the couch.  This document will guide you through creating a complete application. If the dog is detected on the couch, the application will play a pre-recorded sound over the computer's speakers, instructing the dog to get off the couch.  Be sure to record your own voice so that your dog pays attention to you.",source:"@site/docs/getting-started/4-dog-on-couch.md",sourceDirName:"getting-started",slug:"/getting-started/dog-on-couch",permalink:"/python-sdk/docs/getting-started/dog-on-couch",draft:!1,unlisted:!1,editUrl:"https://github.com/groundlight/python-sdk/tree/main/docs/docs/getting-started/4-dog-on-couch.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"A Serious Example: Retail Analytics",permalink:"/python-sdk/docs/getting-started/retail-analytics"},next:{title:"A Quick Example: Live Stream Alert",permalink:"/python-sdk/docs/getting-started/streaming"}},s={},l=[{value:"Requirements",id:"requirements",level:2},{value:"Installation",id:"installation",level:2},{value:"Creating the Application",id:"creating-the-application",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"a-fun-example-dog-on-couch-detector",children:"A Fun Example: Dog-on-Couch Detector"}),"\n",(0,o.jsx)(n.p,{children:"Here is a whimsical example of how you could use Groundlight in your home to keep your dog off the couch.  This document will guide you through creating a complete application. If the dog is detected on the couch, the application will play a pre-recorded sound over the computer's speakers, instructing the dog to get off the couch.  Be sure to record your own voice so that your dog pays attention to you."}),"\n",(0,o.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/docs/installation/",children:"Groundlight SDK"})," with Python 3.7 or higher"]}),"\n",(0,o.jsx)(n.li,{children:"A supported USB or network-connected camera"}),"\n",(0,o.jsxs)(n.li,{children:["A pre-recorded sound file (e.g., ",(0,o.jsx)(n.code,{children:"get_off_couch.mp3"}),")"]}),"\n",(0,o.jsx)(n.li,{children:"A couch and a dog are recommended for proper end-to-end testing."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(n.p,{children:"Ensure you have Python 3.7 or higher installed, and then install the Groundlight SDK and OpenCV library:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"pip install groundlight opencv-python pillow pyaudio\n"})}),"\n",(0,o.jsx)(n.h2,{id:"creating-the-application",children:"Creating the Application"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["First, log in to the ",(0,o.jsx)(n.a,{href:"https://app.groundlight.ai",children:"Groundlight application"})," and get an ",(0,o.jsx)(n.a,{href:"api-tokens",children:"API Token"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Next, we'll write the Python script for the application. Import the required libraries:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",metastring:"notest",children:"import time\nimport cv2\nfrom groundlight import Groundlight\nfrom PIL import Image\nimport pyaudio\nimport wave\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"Define a function to capture an image from the camera using OpenCV:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"def capture_image():\n    cap = cv2.VideoCapture(0)\n\n    ret, frame = cap.read()\n    cap.release()\n\n    if ret:\n        # Convert to PIL image\n        return Image.fromarray(cv2.cvtColor(frame, cv2.COLOR_BGR2RGB))\n    else:\n        return None\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsx)(n.li,{children:"Define a function to play the pre-recorded sound:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"def play_sound(file_path):\n    CHUNK = 1024\n    wf = wave.open(file_path, 'rb')\n\n    p = pyaudio.PyAudio()\n\n    stream = p.open(format=p.get_format_from_width(wf.getsampwidth()),\n                    channels=wf.getnchannels(),\n                    rate=wf.getframerate(),\n                    output=True)\n\n    data = wf.readframes(CHUNK)\n\n    while data:\n        stream.write(data)\n        data = wf.readframes(CHUNK)\n\n    stream.stop_stream()\n    stream.close()\n\n    p.terminate()\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"5",children:["\n",(0,o.jsx)(n.li,{children:"Write the main application loop:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",metastring:"notest",children:'gl = Groundlight()\n\ndetector = gl.get_or_create_detector("Dog on Couch Detector")\n\nwhile True:\n    image = capture_image()\n    if image:\n        try:\n            iq = gl.submit_image_query(image=image, detector=detector, wait=60)\n            answer = iq.result.label\n            if answer == "YES":\n                print("Dog detected on the couch!")\n                play_sound("get_off_couch.mp3")\n        except Exception as e:\n            print(f"Error submitting image query: {e}")\n    else:\n        print("Failed to capture image")\n\n    # Sleep for a minute before checking again\n    time.sleep(60)\n'})}),"\n",(0,o.jsxs)(n.p,{children:["This application captures an image using the ",(0,o.jsx)(n.code,{children:"capture_image"})," function, then submits it to the Groundlight API for analysis. If the dog is detected on the couch, it plays the pre-recorded sound using the ",(0,o.jsx)(n.code,{children:"play_sound"})," function."]}),"\n",(0,o.jsxs)(n.p,{children:["Save the script as ",(0,o.jsx)(n.code,{children:"dog_on_couch_detector.py"})," and run it:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"python dog_on_couch_detector.py\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>a});var o=t(7294);const r={},i=o.createContext(r);function a(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);