"use strict";(self.webpackChunkcode_groundlight_ai=self.webpackChunkcode_groundlight_ai||[]).push([[835],{7802:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guide/managing-confidence","title":"Setting Confidence Thresholds","description":"Introduction to Confidence Thresholds","source":"@site/docs/guide/5-managing-confidence.md","sourceDirName":"guide","slug":"/guide/managing-confidence","permalink":"/python-sdk/docs/guide/managing-confidence","draft":false,"unlisted":false,"editUrl":"https://github.com/groundlight/python-sdk/tree/main/docs/docs/guide/5-managing-confidence.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Submitting Image Queries","permalink":"/python-sdk/docs/guide/submitting-image-queries"},"next":{"title":"Handling Errors","permalink":"/python-sdk/docs/guide/handling-errors"}}');var o=t(4848),r=t(8453);const s={},c="Setting Confidence Thresholds",a={},d=[{value:"Introduction to Confidence Thresholds",id:"introduction-to-confidence-thresholds",level:2},{value:"Configuring Timeouts",id:"configuring-timeouts",level:2}];function h(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"setting-confidence-thresholds",children:"Setting Confidence Thresholds"})}),"\n",(0,o.jsx)(n.h2,{id:"introduction-to-confidence-thresholds",children:"Introduction to Confidence Thresholds"}),"\n",(0,o.jsxs)(n.p,{children:["When creating a Detector or submitting an ImageQuery, you can set the necessary confidence level for your use case. We call this the ",(0,o.jsx)(n.code,{children:"confidence_threshold"}),". Tuning this value allows you to balance the trade-offs between accuracy and latency / cost."]}),"\n",(0,o.jsxs)(n.p,{children:["Confidence scores represent the model's internal assessment of its prediction reliability. Groundlight models provide ",(0,o.jsx)(n.em,{children:"calibrated"})," confidence scores, which means that, when a model makes a prediction with a confidence of 0.95, we expect that (under typical conditions) 95% of the time that prediction will be correct. In other words, a prediction with a confidence of 0.95 is expected to be correct 19 out of 20 times. Confidence calibration kicks in after a sufficient number of labeled images have been collected."]}),"\n",(0,o.jsx)(n.p,{children:"Confidence thresholds represent a minimum confidence that must be achieved for Groundlight to return an answer. If a confidence above the confidence threshold is not achieved, Groundlight will escalate your query up our heirarchy to stronger models and human reviewers. Confidence thresholds should be determined based on your application's acceptable error rate and the potential impact of those errors."}),"\n",(0,o.jsx)(n.p,{children:"Higher confidence thresholds result in predictions that are more accurate but may take longer to process (because they are escalated to more complex/expensive models or human review). Lower confidence thresholds result in faster responses but may be less accurate. Over time, and as more human-provided labels are collected, the ML models will improve, and our fastest models will be able to provide higher confidence predictions more quickly."}),"\n",(0,o.jsx)(n.h2,{id:"configuring-timeouts",children:"Configuring Timeouts"}),"\n",(0,o.jsx)(n.p,{children:"In some cases, challenging queries that require human review can take a number of seconds, so we provide both client-side and server-side timeouts to ensure that your application can continue to function even if the query takes longer than expected."}),"\n",(0,o.jsxs)(n.p,{children:["Set a client-side timeout by configuring the ",(0,o.jsx)(n.code,{children:"wait"})," parameter in the ",(0,o.jsx)(n.code,{children:"submit_image_query"})," method. This simply stops the client from waiting for a response after a certain amount of time."]}),"\n",(0,o.jsxs)(n.p,{children:["Set a server-side timeout by configuring the ",(0,o.jsx)(n.code,{children:"patience_time"})," parameter in the ",(0,o.jsx)(n.code,{children:"submit_image_query"})," method. This tells Groundlight to deprioritize the query after a certain amount of time, which can be useful if the result of a query becomes less relevant over time. For example, if you are monitoring a live video feed, you may want to deprioritize queries that are more than a few seconds old so that our human reviewers can focus on the most recent data."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",metastring:"notest",children:'from groundlight import Groundlight\nfrom PIL import Image\nimport requests\n\ngl = Groundlight()\nimage_url = "https://www.photos-public-domain.com/wp-content/uploads/2010/11/over_flowing_garbage_can.jpg"\nimage = Image.open(requests.get(image_url, stream=True).raw)\n\nd = gl.get_or_create_detector(\n    name="trash",\n    query="Is the trash can full?",\n# highlight-start\n    confidence_threshold=0.95,  # Set the confidence threshold to 0.95\n# highlight-end\n)\n\n# This will wait until either 60 seconds have passed or the confidence reaches 0.95\nimage_query = gl.submit_image_query(\n    detector=d,\n    image=image,\n# highlight-start\n    wait=10,  # tell the client to stop waiting after 10 seconds\n    patience_time=20,  # tell Groundlight to deprioritize the query after 20 seconds\n# highlight-end\n)\n\nprint(f"The answer is {image_query.result.label}")\nprint(f"The confidence is {image_query.result.confidence}")\n'})}),"\n",(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsxs)(n.p,{children:["Tuning the ",(0,o.jsx)(n.code,{children:"confidence_threshold"})," allows you to balance accuracy with response time."]}),(0,o.jsx)(n.p,{children:"Higher confidence thresholds result in more accurate predictions but can increase latency. Achieving these higher confidence levels often requires more labels, which can increase labor costs."}),(0,o.jsx)(n.p,{children:"As our models improve over time, they will become more confident, enabling you to receive higher-confidence answers more quickly and at a lower cost."})]})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var i=t(6540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);